<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- BEGIN HEAD -->
<head>
    <title>转区审批</title>
    <base href="../../">
    <script src="../../pages/scripts/basepath.js"></script>

    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/bootstrap-select/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>

    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/select2/select2.css">

    <script src="../../pages/scripts/header.js"></script>
    <meta http-equiv="content-type" content="text/html" charset="utf-8"/>
    <link rel='stylesheet' href='../../assets/global/plugins/jquery-watable/watable.css'/>
    <link rel='stylesheet' href='../../assets/global/plugins/jquery-watable/animate.min.css'/>



</head>
<body  class="page-header-fixed page-quick-sidebar-over-content">
<!-- 标题栏开始 -->
<div class="page-header navbar navbar-fixed-top">
    <script>$.include("pages/partial/menu.shtml");</script>
</div>
<!-- 标题栏结束 -->
<div class="clearfix"></div>
<div class="page-container">
    <!-- 左侧菜单开始 -->
    <div class="page-sidebar-wrapper">
        <script>$.include("pages/partial/sidebar.shtml");</script>
    </div>
    <!-- 左侧菜单结束 -->

    <!-- 主内容开始 -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <script>$.include("pages/partial/themepanel.shtml");</script>
            <!--内容头开始-->
            <div class="row">
                <div class="col-md-12">
                    <ul class="page-breadcrumb breadcrumb">
                        <li>
                            <i class="fa fa-home"></i>
                            <a href="index.html">抄表管理子系统</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="javascript:void(0)">转区审批</a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 内容头结束-->


            <div class="note note-success container col-sm-12" style="padding-bottom:0px">
                <!-- 查询条件控件 -->
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">供气区域：</div>
                        <input id="find_key" class="inputclear form-control" type="text"
                               placeholder="供气区域">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">核算员：</div>
                        <input id="find_key" class="inputclear form-control" type="text"
                               placeholder="核算员">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>

                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">申请时间：</div>
                        <input id="find_key" class="inputclear form-control" type="date">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">审批时间：</div>
                        <input id="find_key" class="inputclear form-control" type="date">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">抄表本号：</div>
                        <input id="find_key" class="inputclear form-control" type="text"
                               placeholder="抄表本号">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
                <div class="col-sm-3 form-group">

                    <button type="button" class="btn yellow" data-toggle="modal" data-target="#myModal">
                        查询 <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
            <div>
                <div class="note note-success container col-md-12" style="padding-bottom:0px">
                    <h4 class="form-section">客户基本信息</h4>
                    <!--/row-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">客户名称:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="张三" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">客户号:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="210001" readonly>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--/row-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">客户类别:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="普通客户" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">客户状态:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="正常" readonly>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--/row-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">抄表本号:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="22222222" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">供气区域:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="供气区域"
                                           readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--/row-->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">电话号码:</label>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="139........."
                                           readonly>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-3">用户地址:</label>

                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="" value="道里区工程路工程小区4栋301" readonly>
                                </div>

                            </div>
                        </div>
                    </div>



                    <div class="btn-group form-group">
                        <button id="daoru1" class="btn purple">
                            转区申请审批&nbsp;
                            <span class="glyphicon glyphicon"></span>
                        </button>
                    </div>
                    <div class="btn-group form-group">
                        <button id="daoru" class="btn red">
                            错转调回审批&nbsp;
                            <span class="glyphicon glyphicon"></span>
                        </button>
                    </div>
                </div>

            </div>


            <div>
            <div class="container-fluid">

                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-gift"></i>申请明细
                            <h6>温馨提示：请先选择对应的抄表信息</h6>
                        </div>

                        <div class="tools">
                            <a href="javascript:;" class="collapse">
                            </a>
                            <a href="#portlet-config" data-toggle="modal" class="config">
                            </a>
                        </div>
                    </div>

                    <div class="portlet-body">
                        <div class="tabbable-custom ">
                            <ul class="nav nav-tabs ">
                                <li class="active">
                                    <a href="#tab_5_1" data-toggle="tab">
                                        申请明细 </a>

                                </li>

                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab_5_1">
                                    <div class="container-fluid">
                                        <div id="divtable" class="table-responsive container-fluid col-md-12" >
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tab_5_2">
                                    <div class="container-fluid">
                                        <div id="divtable1" class="table-responsive container-fluid col-md-12" >
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="tab_5_3">
                                    <div class="container-fluid">
                                        <div id="divtable2" class="table-responsive container-fluid col-md-12" >
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<div id="divtable" class="table-responsive container-fluid col-md-12" >-->
                <!--</div>-->
            </div>
            <!-- 内容结束-->

        </div>
    </div>
    <!-- 主内容结束 -->
    <script type="text/javascript">$.include("pages/partial/xwatable-form.shtml")</script>

    <!-- 底边栏开始 -->
    <script>$.include("pages/partial/foot.shtml");</script>
    <!-- 底边栏结束 -->
</div>

<script>$.include("pages/partial/scripts.shtml");</script>
<script src="../../assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../../assets/global/plugins/jquery-watable/jquery.watable.js"></script>
    <script type="text/javascript" src="../assets/global/plugins/jquery-watable/jquery.watable2.js"></script>
<script type="text/javascript" src="../../pages/scripts/rqlbuilder.js"></script>
<script type="text/javascript" src="../../pages/scripts/xwatable.js"></script>
    <script type="text/javascript" src="meterreading/skip/xwatable1.js"></script>
<script type="text/javascript" src="../../pages/scripts/refhelper.js"></script>
<script type="text/javascript" src="../../assets/global/plugins/select2/select2.js"></script>

<script type="text/javascript" src="../../assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="../../assets/admin/pages/scripts/components-pickers.js"></script>
<script type="text/javascript" src="../../assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

<script type="text/javascript"  >
    $(function () {
        $('#daoru').click(function () {
            window.location="meterreading/transferarea/meter_applyfor_detail.html";
        });


    })
    $(function () {
        $('#daoru1').click(function () {
            window.location="meterreading/transferarea/meter_applyfor_detail.html";
        });


    })
    var valueFor=function(val){
    }
    var openButton = function() {
        return {
            f: function() {
                return "<a id='d_button' href='meterreading/transferarea/meter_applyfor_detail.html'>查看详情&nbsp;<span class='glyphicon glyphicon-search'></span></a> ";
            }
        }
    }();
    var openButton1 = function() {
        return {
            f: function() {
                return "<a id='d_button' href='meterreading/errorapplyfor1.html'>查看详情&nbsp;<span class='glyphicon glyphicon-search'></span></a> ";
            }
        }
    }();
    $(function(){
            XWATable1.init(
                {
                    //----------------table的选项-------
                    pageSize: 20, 			//Initial pagesize
                    columnPicker: true,         //Show the columnPicker button
                    sorting: false,
                    transition: 'fade',  //(bounce, fade, flip, rotate, scroll, slide).
                    checkboxes: true,           //Make rows checkable. (Note. You need a column with the 'unique' property)
                    checkAllToggle:true,        //Show the check-all toggle//+RQLBuilder.like("KEYY", "a").rql()
                    rowClicked: function(data) {
                        console.log('row clicked');   //data.event holds the original jQuery event.
                        console.log(data);            //data.row holds the underlying row you supplied.
                    },
                    //----------------基本restful地址---
                    restbase: 'json/charging/meter_error.json',
                    //---------------行定义
                    coldefs: [
                        {
                            col:"versionID",
                            friendly: "申请人",
                            unique: true,
                            readonly: "readonly",
                            sortOrder: "asc",
                            index:1
                        },
                        {
                            col:"gasCategory",
                            friendly: "申请单号",
                            inputsource:"select",
                            readonly: "readonly",
                            ref_url:'json/charging/gasCategory.json',
                            ref_name:"gasCatname",
                            ref_value:"gasCatvalue",
                            format:gasCategoryFormat,
                            index:2
                        },
                        {
                            col:"gasType",
                            friendly: "申请地址",
                            inputsource:"select",
                            readonly: "readonly",
                            ref_url: 'json/charging/gasType.json',
                            ref_name:"name",
                            ref_value:"value",
                            format:gasTypeFormat,
                            index:3

                        },
                        {
                            col:"gasStart",
                            friendly: "申请人",
                            readonly: "readonly",
                            index:10
                        },
                        {
                            col:"gasEnd",
                            friendly: "原区域",
                            readonly: "readonly",
                            index:4
                        },
                        {
                            col:"price",
                            friendly: "复核日期",
                            readonly: "readonly",
                            index:5
                        },
                        {
                            col:"changeTime",
                            friendly: "复核一次表读数",
                            inputsource:"datepicker",
                            readonly: "readonly",
                            index:6
                        },
                        {
                            col:"effectTime",
                            friendly: "复核二次表读数",
                            inputsource:"datepicker",
                            readonly: "readonly",
                            index:7

                        },
                        {
                            col:"changePerson",
                            friendly: "复核状态",
                            readonly: "readonly",
                            index:8
                        },
                        {
                            col:"changePerson",
                            friendly: "复核结果",
                            readonly: "readonly",
                            index:9
                        },
                        {
                            col:"UUID",
                            friendly:"操作",
                            nonedit: "nosend",
                            format:openButton1,
                            index:11


                        }

                    ],
                    //---------------查询时过滤条件
                    findFilter: function(){//find function
                        var filter = "keyy="+$('#find_key').val();
                        return filter;
                    }//--findFilter
                }//--init
            );//--end init




            $('#find_provincename').on('input',function(e){
                console.log("changing::"+e.target.value)
                if(!e.target.value){
                    XWATable1.autoResetSearch();
                }
            });


        }
    );

    $(function(){
                XWATable.init(
                        {
                            //----------------table的选项-------
                            pageSize: 20, 			//Initial pagesize
                            columnPicker: true,         //Show the columnPicker button
                            sorting: false,
                            transition: 'fade',  //(bounce, fade, flip, rotate, scroll, slide).
                            checkboxes: true,           //Make rows checkable. (Note. You need a column with the 'unique' property)
                            checkAllToggle:true,        //Show the check-all toggle//+RQLBuilder.like("KEYY", "a").rql()
                            rowClicked: function(data) {
                                console.log('row clicked');   //data.event holds the original jQuery event.
                                console.log(data);            //data.row holds the underlying row you supplied.
                            },
                            //----------------基本restful地址---
                            restbase: 'json/meterreading/error/meter_error_apply.json',
                            //---------------行定义
                            coldefs: [
                                {
                                    col:"versionID",
                                    friendly: "申请人",
                                    unique: true,
                                    readonly: "readonly",
                                    sortOrder: "asc",
                                    index:1
                                },
                                {
                                    col:"gasCategory",
                                    friendly: "原区域",
                                    inputsource:"select",
                                    readonly: "readonly",
                                    ref_url:'json/charging/gasCategory.json',
                                    ref_name:"gasCatname",
                                    ref_value:"gasCatvalue",
                                    format:gasCategoryFormat,
                                    index:2
                                },
                                {
                                    col:"gasType",
                                    friendly: "申请单号",
                                    inputsource:"select",
                                    readonly: "readonly",
                                    ref_url: 'json/charging/gasType.json',
                                    ref_name:"name",
                                    ref_value:"value",
                                    format:gasTypeFormat,
                                    index:3

                                },
                                {
                                    col:"gasStart",
                                    friendly: "申请时间",
                                    readonly: "readonly",
                                    index:4
                                },
                                {
                                    col:"gasEnd",
                                    friendly: "目标区域",
                                    readonly: "readonly",
                                    index:5
                                },
                                {
                                    col:"price",
                                    friendly: "申请状态",
                                    readonly: "readonly",
                                    index:6
                                },
                                {
                                    col:"changeTime",
                                    friendly: "审批位置",
                                    inputsource:"datepicker",
                                    readonly: "readonly",
                                    index:7
                                },
                                {
                                    col:"effectTime",
                                    friendly: "是否作废",
                                    inputsource:"datepicker",
                                    readonly: "readonly",
                                    index:7
                                },
                                {
                                    col:"changePerson",
                                    friendly: "申请事由",
                                    readonly: "readonly",
                                    index:8
                                },
                                {
                                    col:"UUID",
                                    friendly:"操作",
                                    nonedit: "nosend",
                                    format:openButton,
                                    index:9
                                }

                            ],
                            //---------------查询时过滤条件
                            findFilter: function(){//find function
                                var filter = "keyy="+$('#find_key').val();
                                return filter;
                            }//--findFilter
                        }//--init
                );//--end init




                $('#find_provincename').on('input',function(e){
                    console.log("changing::"+e.target.value)
                    if(!e.target.value){
                        XWATable.autoResetSearch();
                    }
                });


            }
    );

    var gasTypeHelper = RefHelper.create({
        ref_url: 'json/charging/gasType.json',
        ref_col:"value",
        ref_display:"name",
    });

    var gasTypeFormat = function () {
        return {
            f : function (val) {
                console.log("gasTypeFormat:" + val + ":" + gasTypeHelper.getDisplay(val));

                return gasTypeHelper.getDisplay(val);
            },
        }
    }();

    var gasCategoryHelper = RefHelper.create({
        ref_url: 'json/charging/gasCategory.json',
        ref_col:"gasCatvalue",
        ref_display:"gasCatname",
    });

    var gasCategoryFormat = function () {
        return {
            f : function (val) {
//                console.log("gasCategoryFormat:" + val + ":" + gasCategoryHelper.getDisplay(val));

                return gasCategoryHelper.getDisplay(val);
            },
        }
    }();
</script>


<script>
    jQuery(document).ready(function() {
        ComponentsPickers.init();

    });

</script>

</body>
</html>