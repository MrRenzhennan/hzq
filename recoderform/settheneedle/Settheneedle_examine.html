<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- BEGIN HEAD -->
<head>
    <title>定针查询</title>
    <base href="../../">
    <script src="../../pages/scripts/basepath.js"></script>

    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/bootstrap-select/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>

    <link rel="stylesheet" type="text/css" href="../../assets/global/plugins/select2/select2.css">

    <script src="../../pages/scripts/header.js"></script>
    <meta http-equiv="content-type" content="text/html" charset="utf-8"/>
    <link rel='stylesheet' href='../../assets/global/plugins/jquery-watable/watable.css'/>
    <link rel='stylesheet' href='../../assets/global/plugins/jquery-watable/animate.min.css'/>



</head>
<body  class="page-header-fixed page-quick-sidebar-over-content">
<!-- 标题栏开始 -->
<div class="page-header navbar navbar-fixed-top">
    <script>$.include("pages/partial/menu.shtml");</script>
</div>
<!-- 标题栏结束 -->
<div class="clearfix"></div>
<div class="page-container">
    <!-- 左侧菜单开始 -->
    <div class="page-sidebar-wrapper">
        <script>$.include("pages/partial/sidebar.shtml");</script>
    </div>
    <!-- 左侧菜单结束 -->

    <!-- 主内容开始 -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <script>$.include("pages/partial/themepanel.shtml");</script>
            <!--内容头开始-->
            <div class="row">
                <div class="col-md-12">
                    <ul class="page-breadcrumb breadcrumb">
                        <li>

                            <a>抄表管理</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a>定针查询</a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 内容头结束-->
                <!-- 查询条件控件 -->
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">供气区域：</div>
                        <input id="find_key" class="inputclear form-control" type="text"
                               placeholder="供气区域">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
                <div class="col-sm-3 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">核算员：</div>
                        <input id="find_key" class="inputclear form-control" type="text"
                               placeholder="核算员">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>
            <div class="col-sm-3 form-group">
                <div class="btn-group input-group">
                    <div class="input-group-addon">抄表员：</div>
                    <input id="find_key" class="inputclear form-control" type="text"
                           placeholder="抄表员">
                    <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                </div>
            </div>
            <div class="col-sm-3 form-group">
                <div class="btn-group input-group">
                    <div class="input-group-addon">抄表本号：</div>
                    <input id="find_key" class="inputclear form-control" type="text"
                           placeholder="抄表本号">
                    <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                </div>
            </div>


            <div class="col-sm-3 form-group">
                <div class="btn-group input-group">
                    <div class="input-group-addon">客户号：</div>
                    <input id="find_key" class="inputclear form-control" type="text"
                           placeholder="客户号">
                    <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                </div>
            </div>
            <div class="col-sm-3 form-group">
                <div class="btn-group input-group">
                    <div class="input-group-addon">申请状态：</div>
                    <select id="find_key" class="form-control select2me">
                        <option>请选择</option>
                        <option>待审批</option>
                        <option>已审批</option>
                        <option>已执行</option>
                        <option>已驳回</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-6 form-group">
                <div class="btn-group input-group">
                    <div class="input-group-addon">起止时间：</div>
                    <div class="input-group  date-picker input-daterange" data-date="10/11/2012" data-date-format="mm/dd/yyyy">
                        <input type="text" class="form-control " name="from">
                                <span class="input-group-addon">
                                                    至 </span>
                        <input type="text" class="form-control " name="to">
                    </div>
                    <span class="inputclear glyphicon glyphicon-remove-circle hide" ></span>
                </div>
            </div>
                <div class="col-sm-3 form-group">

                    <button type="button" class="btn yellow" data-toggle="modal" data-target="#myModal">
                        查询 <i class="fa fa-search"></i>
                    </button>
                    <button type="button" class="btn green" id="apply1">
                        申请 <i class="fa fa-plus"></i>
                    </button>
                    <script>
                        $('#apply1').click(function(){
                            window.location="recoderform/settheneedle/settheneedle_apply.html";
                        });
                    </script>
                    <button type="button" class="btn red" id="apply2">
                        执行 <i class="fa fa-gears"></i>
                    </button>
                    <script>
                        $('#apply2').click(function(){
                            window.location="recoderform/settheneedle/settheneedle_execute.html";
                        });
                    </script>
                </div>
                                    <div class="container-fluid">
                                        <div id="divtable" class="table-responsive container-fluid col-md-12" >
                                        </div>
                                    </div>


        </div>
    </div>
    <div class="modal fade" id="apply" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">定针申请</h4>
                </div>
                <div class="modal-body">

                    <div class="row">
                        <div class="col-sm-4 form-group">
                            <div class="btn-group input-group">
                                <div class="input-group-addon">操作状态：</div>
                                <select id="find_key" class="form-control select2me">
                                    <option>请选择</option>
                                    <option>定针申请</option>
                                    <option>定针执行</option>

                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>表读数</label>
                                <input type="text" class="form-control" placeholder="423">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>修正表读数</label>
                                <input type="text" class="form-control" placeholder="456">
                            </div>
                        </div>
                    </div>





                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>备注</label>
                                <textarea class="form-control" rows="3"></textarea>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer my-modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" id ="errorApply"class="btn btn-primary" data-dismiss="modal">执行申请</button>
                    <script>

                        $(function () {
                            $('#errorApply').click(function () {
                                window.location="recoderform/settheneedle/settheneedle_examine.html";
                            });
                        })
                    </script>

                </div>
            </div>
        </div>
    </div>
    <!-- 主内容结束 -->
    <script type="text/javascript">$.include("pages/partial/xwatable-form.shtml")</script>

    <!-- 底边栏开始 -->
    <script>$.include("pages/partial/foot.shtml");</script>
    <!-- 底边栏结束 -->
</div>

<script>$.include("pages/partial/scripts.shtml");</script>
<script src="../../assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../../assets/global/plugins/jquery-watable/jquery.watable.js"></script>
    <script type="text/javascript" src="../assets/global/plugins/jquery-watable/jquery.watable2.js"></script>
<script type="text/javascript" src="../../pages/scripts/rqlbuilder.js"></script>
<script type="text/javascript" src="../../pages/scripts/xwatable.js"></script>
    <script type="text/javascript" src="recoderform/skip/xwatable1.js"></script>
<script type="text/javascript" src="../../pages/scripts/refhelper.js"></script>
<script type="text/javascript" src="../../assets/global/plugins/select2/select2.js"></script>

<script type="text/javascript" src="../../assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="../../assets/admin/pages/scripts/components-pickers.js"></script>
<script type="text/javascript" src="../../assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

<script type="text/javascript"  >
    $(function () {
        $('#daoru').click(function () {
            window.location="recoderform/settheneedle/settheneedle_ex_detail.html";
        });


    })
    $(function () {
        $('#daoru1').click(function () {
            window.location="recoderform/settheneedle/settheneedle_ex_detail.html";
        });


    })
    var valueFor=function(val){
    }
    var openButton = function() {
        return {
            f: function() {
                return "<a data-target='#apply' data-toggle='modal'>定针执行&nbsp;<i class='fa fa-plus'></i></a> ";
            }
        }
    }();



    $(function(){
                XWATable.init(
                        {
                            //----------------table的选项-------
                            pageSize: 20, 			//Initial pagesize
                            columnPicker: true,         //Show the columnPicker button
                            sorting: false,
                            transition: 'fade',  //(bounce, fade, flip, rotate, scroll, slide).
                            checkboxes: true,           //Make rows checkable. (Note. You need a column with the 'unique' property)
                            checkAllToggle:true,        //Show the check-all toggle//+RQLBuilder.like("KEYY", "a").rql()
                            rowClicked: function(data) {
                                console.log('row clicked');   //data.event holds the original jQuery event.
                                console.log(data);            //data.row holds the underlying row you supplied.
                            },
                            //----------------基本restful地址---
                            restbase: 'json/meterreading/settheneedle/settheneedle_search.json',
                            //---------------行定义
                            coldefs: [
                                {
                                    col:"versionID",
                                    friendly: "供气单位",
                                    unique: true,
                                    readonly: "readonly",
                                    sortOrder: "asc",
                                    index:1
                                },
                                {
                                    col:"gasCategory",
                                    friendly: "客户号",
                                    inputsource:"select",
                                    readonly: "readonly",
                                    ref_url:'json/charging/gasCategory.json',
                                    ref_name:"gasCatname",
                                    ref_value:"gasCatvalue",
                                    format:gasCategoryFormat,
                                    index:2
                                },
                                {
                                    col:"gasType",
                                    friendly: "客户名",
                                    inputsource:"select",
                                    readonly: "readonly",
                                    ref_url: 'json/charging/gasType.json',
                                    ref_name:"name",
                                    ref_value:"value",
                                    format:gasTypeFormat,
                                    index:3

                                },
                                {
                                    col:"gasStart",
                                    friendly: "表户名称",
                                    readonly: "readonly",
                                    index:4
                                },
                                {
                                    col:"gasEnd",
                                    friendly: "申请时间",
                                    readonly: "readonly",
                                    index:5
                                },
                                {
                                    col:"price",
                                    friendly: "申请状态",
                                    readonly: "readonly",
                                    index:6
                                },
                                {
                                    col:"changeTime",
                                    friendly: "表读数",
                                    inputsource:"datepicker",
                                    readonly: "readonly",
                                    index:7
                                },
                                {
                                    col:"effectTime",
                                    friendly: "修正表读数",
                                    inputsource:"datepicker",
                                    readonly: "readonly",
                                    index:7
                                },
                                {
                                    col:"changePerson",
                                    friendly: "申请人",
                                    readonly: "readonly",
                                    index:8
                                },
                                {
                                    col:"changePerson1",
                                    friendly: "申请原因",
                                    readonly: "readonly",
                                    index:8
                                },
                              /*  {
                                    col:"UUID",
                                    friendly:"操作",
                                    nonedit: "nosend",
                                    format:openButton,
                                    index:9
                                }*/


                            ],
                            //---------------查询时过滤条件
                            findFilter: function(){//find function
                                var filter = "keyy="+$('#find_key').val();
                                return filter;
                            }//--findFilter
                        }//--init
                );//--end init




                $('#find_provincename').on('input',function(e){
                    console.log("changing::"+e.target.value)
                    if(!e.target.value){
                        XWATable.autoResetSearch();
                    }
                });


            }
    );

    var gasTypeHelper = RefHelper.create({
        ref_url: 'json/charging/gasType.json',
        ref_col:"value",
        ref_display:"name",
    });

    var gasTypeFormat = function () {
        return {
            f : function (val) {
                console.log("gasTypeFormat:" + val + ":" + gasTypeHelper.getDisplay(val));

                return gasTypeHelper.getDisplay(val);
            },
        }
    }();

    var gasCategoryHelper = RefHelper.create({
        ref_url: 'json/charging/gasCategory.json',
        ref_col:"gasCatvalue",
        ref_display:"gasCatname",
    });

    var gasCategoryFormat = function () {
        return {
            f : function (val) {
//                console.log("gasCategoryFormat:" + val + ":" + gasCategoryHelper.getDisplay(val));

                return gasCategoryHelper.getDisplay(val);
            },
        }
    }();
</script>


<script>
    jQuery(document).ready(function() {
        ComponentsPickers.init();

    });

</script>

</body>
</html>