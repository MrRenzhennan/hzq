<!DOCTYPE html>
<html lang="en">

<head>
    <title>收费管理</title>
    <style>
        #search {
            width: 100%;
            margin: 0 auto;
            text-align: center;
        }
    </style>
    <base href="../">
    <meta charset="UTF-8">
    <script src="pages/scripts/basepath.js"></script>
    <script src="pages/scripts/header.js"></script>
    <meta http-equiv="content-type" content="text/html" charset="utf-8"/>
    <link href="assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href='assets/global/plugins/jquery-watable/watable.css' rel='stylesheet'/>
    <link href="assets/global/plugins/bootstrap-fileinput/fileinput.min.css" rel="stylesheet">

    <style>
        #divtable {
            display: none;
        }

        .table td {
            vertical-align: middle !important;
        }
    </style>
</head>

<body class="page-header-fixed page-quick-sidebar-over-content">
<script>
    $.include("collectfee/partial/customerinfo.shtml");
    $.include("collectfee/partial/icgasrowinfo.shtml");
    $.include("collectfee/partial/wasterowinfo.shtml");
    $.include("collectfee/partial/ctmaccountinfo.shtml");
    $.include("collectfee/partial/iccardinfo.shtml");
</script>
<div class="page-header navbar navbar-fixed-top">
    <script>
        $.include("pages/partial/menu.shtml");
    </script>
</div>

<div class="clearfix"></div>
<div class="page-container">
    <!-- 左侧菜单开始 -->
    <div class="page-sidebar-wrapper">
        <script>
            $.include("pages/partial/sidebar.shtml");
        </script>
    </div>
    <!-- 左侧菜单结束 -->
    <div id="gfdata"></div>
    <!-- 主内容开始 -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <!--内容头开始-->
            <div class="row">
                <div class="col-md-12">
                    <ul class="page-breadcrumb breadcrumb">
                        <li>
                            <i class="fa  fa-map-marker"></i>
                            <a href="index.html">收费管理</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="index.html">燃气收费管理</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="javascript:void(0)">IC卡补量审批</a>
                        </li>
                    </ul>
                </div>
            </div>
            <script>
                $.include("serviceManage/partial/select_user.shtml");
            </script>

            <div class="tabbable tabbable-custom tabbable-custom-profile col-md-12" style="padding-bottom:0px">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#tab_t_11" data-toggle="tab" style="color:#1d8bd8;">
                            补量情况 </a>

                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="tab_t_11">
                        <div class="portlet-body" style="height: 90px">
                            <div class="form-group">
                                <table class="watable table table-striped table-hover table-bordered table-condensed">
                                    <thead>
                                    <tr>
                                        <th>
                                            选择
                                        </th>
                                        <th>
                                            业务单号
                                        </th>
                                        <th>
                                            补量原因
                                        </th>
                                        <th>
                                            营业员
                                        </th>
                                        <th>
                                            金额
                                        </th>

                                        <th>
                                            收费类型
                                        </th>
                                        <th>
                                            业务状态
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <label>
                                                <input type="checkbox" name="optionsCheckbox1"
                                                       value="option1" checked/>
                                            </label>
                                        </td>
                                        <td>
                                            23900098
                                        </td>
                                        <td>
                                            拆表
                                        </td>
                                        <td>
                                            张涛
                                        </td>
                                        <td>
                                            200
                                        </td>

                                        <td>
                                            燃气费
                                        </td>
                                        <td>
                                            审核通过
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                <input type="checkbox" name="optionsCheckbox2"
                                                       value="option2"/>
                                            </label>
                                        </td>
                                        <td>
                                            23900098
                                        </td>
                                        <td class="hidden-xs">
                                            拆表
                                        </td>
                                        <td>
                                            张涛
                                        </td>
                                        <td>
                                            200
                                        </td>

                                        <td>
                                            燃气费
                                        </td>
                                        <td>
                                            待审核
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tab_iccard" class="tab-pane" role="tabpanel">
</div>
<div id="tab_ctm" class="tab-pane" role="tabpanel">
</div>
<div id="tab_customer" class="tab-pane" role="tabpanel">
</div>




<div class="modal fade" id="complementModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span
                        aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="buyModalLabel">确认补量信息</h4>
            </div>
            <div class="modal-body">

                <div class="col-md-12">
                    <div class="col-md-6 form-group">
                        <div class="btn-group input-group">
                            <div class="input-group-addon">所购气量：</div>
                            <input id="purchasegas" class="inputclear form-control" type="text">
                            <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                        </div>
                    </div>
                    <div class="col-md-6 form-group">
                        <div class="btn-group input-group">
                            <div class="input-group-addon">单价：</div>
                            <input id="price" class="inputclear form-control" type="text">
                            <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                <div class="col-md-6 form-group">
                    <div class="btn-group input-group">
                        <div class="input-group-addon">所需金额：</div>
                        <input id="money" class="inputclear form-control" type="text">
                        <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                    </div>
                </div>

            </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" id="complementBtn" class="btn btn-primary">确定</button>
            </div>
        </div>
    </div>
</div>

<!-- 底边栏开始 -->
<script>
    $.include("pages/partial/foot.shtml");
</script>
<script type="text/javascript">
    $.include("pages/partial/xwatable-form.shtml")
</script>
</body>

<script>
    $.include("pages/partial/scripts.shtml");

</script>
<script type="text/javascript" src="../assets/global/plugins/jquery-watable/jquery.watable.js"></script>
<script type="text/javascript" src="../pages/scripts/rqlbuilder.js"></script>
<script type="text/javascript" src="../pages/scripts/xwatable.js"></script>

<script src="assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/global/plugins/jquery-watable/jquery.watable.js"></script>
<script type="text/javascript" src="pages/scripts/rqlbuilder.js"></script>

<script type="text/javascript" src="pages/scripts/refhelper.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

<script type="text/javascript" src="assets/global/plugins/bootstrap-fileinput/fileinput.min.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-fileinput/zh.js"></script>
<script type="text/javascript"
        src="assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script src="pages/scripts/jquery.json.min.js"></script>
<script type="text/javascript" src="pages/scripts/jquery.serialize-object.min.js"></script>
<script type="text/javascript" src="collectfee/js/charge.js"></script>
<script type="text/javascript" src="collectfee/js/localservice.js"></script>
<script type="text/javascript">
    var valueFor = function (val) {
    };
    var openButton = function () {
        return {
            f: function () {
                return "<a  id='d_button' href=''>&nbsp;</a> ";
            }
        }
    }();
    $(function () {
            XWATable.init(
                {
                    //----------------table的选项-------
                    pageSize: 20, 			//Initial pagesize
                    columnPicker: true,         //Show the columnPicker button
                    sorting: true,
                    transition: 'fade',  //(bounce, fade, flip, rotate, scroll, slide).
                    checkboxes: true,           //Make rows checkable. (Note. You need a column with the 'unique' property)
                    checkAllToggle: true,        //Show the check-all toggle//+RQLBuilder.like("KEYY", "a").rql()
                    rowClicked: function (data) {
                        console.log('row clicked');   //data.event holds the original jQuery event.
                        console.log(data);            //data.row holds the underlying row you supplied.
                    },
                    //----------------基本restful地址---
                    restbase: '../json/collectfee/methodchange.json',
                    //---------------行定义
                    coldefs: [
                        {
                            col: "collectTime",
                            friendly: "收费日期",
                            readonly: "readonly",
                            index: 1
                        },
                        {
                            col: "applyTime",
                            friendly: "申请日期",
                            readonly: "readonly",
                            index: 2
                        },
                        {
                            col: "yyyName",
                            friendly: "营业员",
                            unique: true,
                            readonly: "readonly",
                            index: 3
                        },
                        {
                            col: "yy",
                            friendly: "营业网点",
                            readonly: "readonly",
                            index: 4
                        },

                        {
                            col: "collectmoney",
                            friendly: "收费金额",
                            readonly: "readonly",
                            index: 5
                        },
                        {
                            col: "tollMethod",
                            friendly: "收费方式",
                            readonly: "readonly",
                            index: 6
                        },
                        {
                            col: "afterMethod",
                            friendly: "变更后收费方式",
                            readonly: "readonly",
                            index: 7
                        },
                        {
                            col: "feeType",
                            friendly: "费用类型",
                            readonly: "readonly",
                            index: 8
                        },
                        {
                            col: "state",
                            friendly: "状态",
                            readonly: "readonly",
                            index: 9
                        }

                    ],
                    //---------------查询时过滤条件
                    findFilter: function () {//find function
                        var filter = "keyy=" + $('#find_key').val();
                        return filter;
                    }//--findFilter
                }//--init
            );//--end init

            $('#find_provincename').on('input', function (e) {
                console.log("changing::" + e.target.value)
                if (!e.target.value) {
                    XWATable.autoResetSearch();
                }
            });
        }
    );
</script>
<!-- 底边栏结束 -->
<script type="text/javascript">
    $(function () {
        $(".tab-content").delegate("a[hzq-type=remoteModal]", "click", function (obj) {
            var $targetModalhzq = $($(obj.target).attr("hzq-modal"));
            var targetPath = $(obj.target).attr("hzq-remote");
            var fnstring = $(obj.target).attr("hzq-cb");
            var param = $(obj.target).attr("hzq-param");
            $targetModalhzq.modal({
                show: true
            })
            $targetModalhzq.unbind("show.bs.modal").on("show.bs.modal", function (e) {
                $(e.currentTarget).find("#mcontent").empty();
            });
            $targetModalhzq.unbind("shown.bs.modal").on("shown.bs.modal", function (e) {
                // 加载数据模板
                //console.log($(e.currentTarget));
                $(e.currentTarget).find("#mcontent").load(targetPath, function () {
                    if (fnstring) {
                        var fn = window[fnstring];
                        if (typeof fn === "function") fn.call(null, JSON.parse(param));
                        window[fnstring] = undefined;

                        //if (typeof fn === "function") fn.call(null, param );
                    }
                });
            });
            $targetModalhzq.on("hidden.bs.modal", function () {
                $(this).removeData("bs.modal");
            });
        });
    });
    var $targetModal;
    $(document).ready(function () {
        $targetModal = $("#write_iccard");
        $targetModal.modal({
            show: false,
            backdrop: 'static',
            keyboard: false
        })
        $targetModal.unbind("shown.bs.modal").on("shown.bs.modal", function (e) {
            var content = "";
            $(e.currentTarget).find("#mcontent").append(content);
        });
        $targetModal.on("hidden.bs.modal", function () {
            $(this).removeData("bs.modal");
        });
        /*$("#find_key").val("116042061");*/
        $("#find_user_btn").closest(".row").append("<div class=\"btn-group form-group col-sm-1\"><button id=\"read_card\" type=\"button\" class=\"btn green\">读卡&nbsp;<i id=\"ib\" class=\"fa fa-paper-plane\"></i></button></div>");


        // 不写卡
        $("#write_iccard").delegate("#cancelWriteCard", "click", function (e) {
            var currentArchive = chargeHelper.getContext("_current_archive");
            var writecarddata = chargeHelper.getContext("writecarddata");
            chargeHelper.corIc(currentArchive.customerCode, writecarddata.bizId, function () {
                $targetModal.modal('hide');
                onCustomerSelected(currentArchive.customerCode);
            });
        });
        // 重新写卡
        $("#write_iccard").delegate("#reWriteCard", "click", function (e) {
            doWriteCard(chargeHelper.getContext("writecarddata"), function (cardData, isSuccess) {
                if (isSuccess) {
                    var chgResult = chargeHelper.getContext("writecarddata");
                    //if (confirm("燃气交费成功，交费金额[" + chgResult.money + "]，交费气量[" + chgResult.gas + "]，账户余额为[" + chgResult.balance + "]，是否打印发票")) {
                    $targetModal.find(".modal-title").html("打印发票");
                    $targetModal.find("#mcontent").html("打印中，请稍后...");
                    $targetModal.find("#reWriteCard").hide();
                    $targetModal.find("#cancelWriteCard").hide();
                    chargeHelper.printInvoice(chgResult.invoiceId, function (pData) {
                        localService.callPrint({"ptid": pData.printId}, function (retData, isSuccess) {
                            $targetModal.modal('hide');
                            if (isSuccess) {
                                if (confirm("是否打印成功？")) {
                                    chargeHelper.printInvoiceResponse(chgResult.invoiceId);
                                }
                                onCustomerSelected(chargeHelper.getContext("_current_archive").customerCode);
                            } else {
                                alert("打印失败");
                            }
                        });
                    });
                    //};
                }
            });
        });

        // 写卡方法
        var doWriteCard = function (chgResult, cb) {
            if (chgResult.kzt == "0") {
                localService.callOpenCard(chgResult.kxplx, chgResult.cardFactory, {
                    "com": chargeHelper.com,
                    "baud": chgResult.baud,
                    "kh": chgResult.kh,
                    "btm": chgResult.btm,
                    "dqdm": chgResult.dqdm,
                    "ql": chgResult.ql,
                    "je": chgResult.je,
                    "xdj": chgResult.xdj,
                    "djlx": chgResult.djlx,
                    "jgtm": chgResult.jgtm,
                    "cs": chgResult.cs,//购气次数
                    "klx": chgResult.klx,
                    "kzt": chgResult.kzt,
                    "bkcs": chgResult.bkcs,
                    "bjql": chgResult.bjql,
                    "txxe": chgResult.txxe,
                    "czxe": chgResult.czxe,
                    "dllx": "0",
                    "kxplx": chgResult.kxplx
                    // data.kxplx
                }, cb);
            } else {
                localService.callWriteCard(chgResult.kxplx, chgResult.cardFactory, {
                    "com": chargeHelper.com,
                    "baud": "9600",
                    "kh": chgResult.kh,
                    "btm": chgResult.btm,
                    "dqdm": chgResult.dqdm,
                    "ql": chgResult.ql,
                    "je": chgResult.je,
                    "xdj": chgResult.xdj,
                    "djlx": chgResult.djlx,
                    "jgtm": chgResult.jgtm,
                    "cs": chgResult.cs,
                    "klx": chgResult.klx,
                    "kzt": chgResult.kzt,
                    "bkcs": chgResult.bkcs,
                    "bjql": chgResult.bjql,
                    "txxe": chgResult.txxe,
                    "czxe": chgResult.czxe,
                    "dllx": chgResult.dllx,
                    "kxplx": chgResult.kxplx
                }, cb);
            }
        };
        // 收费按钮
        $("#divChgContainer").delegate("#BtnSub", "click", function (e) {
            var $obj = $(e.currentTarget),
                $table = $obj.closest("table");
            var title = $table.find("#chgTitle").val();
            var chgTypeName = $table.find("input[name=chgType]").text();
            var chgTypeId = $table.find("input[name=chgType]").val();
            var money = $table.find("#cashAmount").val();
            var checkNo = $table.find("#input_checkno").val();
            var feeType = $table.find("#feeType").val();
            if (feeType == "gas") {
                var useBalance = $table.find("#changecheck").attr("checked") ? "1" : "0";
                if (confirm("收取" + title + "\u000d收费方式：" + chgTypeName + "\u000d收费金额：" + money + "\u000d是否确定收费？")) {
                    // IC卡收费
                    $targetModal.modal({
                        show: true,
                        backdrop: 'static',
                        keyboard: false
                    })
                    $targetModal.find(".modal-title").html("收费");
                    $targetModal.find("#mcontent").html("收费中，请稍后...");
                    $targetModal.find("#reWriteCard").hide();
                    $targetModal.find("#cancelWriteCard").hide();
                    chargeHelper.chgIcGasFee(chargeHelper.getContext("_current_archive").customerCode, chgTypeId, money, checkNo, useBalance, function (chgResult) {
                        // 缓存写卡信息
                        chargeHelper.setContext("writecarddata", chgResult);
                        doWriteCard(chgResult, function (cardData, isSuccess) {
                            if (isSuccess) {
                                $targetModal.find(".modal-title").html("打印发票");
                                $targetModal.find("#mcontent").html("打印中，请稍后...");
                                chargeHelper.printInvoice(chgResult.invoiceId, function (pData) {
                                    localService.callPrint({"ptid": pData.printId}, function (retData, isSuccess) {
                                        $targetModal.modal('hide');
                                        if (isSuccess) {
                                            bootbox.confirm("是否打印成功？", function (result) {
                                                if (result) {
                                                    chargeHelper.printInvoiceResponse(chgResult.invoiceId);
                                                } else {

                                                }
                                                onCustomerSelected(chargeHelper.getContext("_current_archive").customerCode);
                                            });
                                            /*    if (confirm("是否打印成功？")) {
                                                chargeHelper.printInvoiceResponse(chgResult.invoiceId);
                                            }
                                            onCustomerSelected(chargeHelper.getContext("_current_archive").customerCode);*/
                                        } else {
                                          //alert("打印失败");
                                            bootbox.alert("打印失败", function () {
                                                onCustomerSelected(chargeHelper.getContext("_current_archive").customerCode);
                                            });
                                        }
                                    })
                                });
                            } else {
                                $targetModal.find(".modal-title").html("写卡错误");
                                $targetModal.find("#mcontent").html("收费成功，但是写卡错误，请插卡后重试");
                                $targetModal.find("#reWriteCard").show();
                                $targetModal.find("#cancelWriteCard").show();
                            }
                        });
                    });
                }
                ;
            } else {
            }
        });

        // 读卡
        $("#read_card").click(function () {
            chargeHelper.readCard(function (cardData, isSuccess) {
                console.log(cardData);
                if (isSuccess) {
                    // 调用方法加载客户档案信息
                    chargeHelper.setContext("_current_iccard", cardData);
                    if (cardData.result.ql != "0") {
                        alert("卡内气量不为0");
                    } else {
                        chargeHelper.getArchiveInfoByIcCard(cardData.result.kh,cardData.result.dqdm, function () {
                            initData(chargeHelper.getContext("_current_archive").customerCode);
                        });
                    }
                } else {
                    bootbox.alert("<b>读卡失败,请检查如下情况：</b></br> 1.是否已将IC卡放入读卡器 </br> 2.开新卡时不需要读卡 </br>3.IC卡是否和读卡器匹配 </br> 4.请查看读卡器连接是否正常 </br> 5.请查看IC配置文件中IC卡设置信息是否有误。",function () {
                        window.location.reload();
                    });
                }

            });
        });
    });
    function onCustomerSelected(customerCode) {
        // 1. 根据客户编号，读取客户信息
        chargeHelper.getArchiveInfo(customerCode, function () {
            if (chargeHelper.getContext("_current_archive")) {
                var currentArchive = chargeHelper.getContext("_current_archive");
                // 6. 加载IC卡信息
                chargeHelper.getIcCardInfo(currentArchive.ctmArchiveId, function (data) {
                    addTab("tab_iccard", "IC卡信息");
                    var cardData = chargeHelper.getContext("_current_iccard");
                    var data = $.extend(cardData, data);
                    // 合并卡数据和库数据
                    dust.loadSource(dust.compile($("#__dust__iccardInfo").html(), "iccardInfo__"));
                    dust.render("iccardInfo__", {"data": data}, function (err, res) {
                        $("#tab_iccard").html(res);
                    });
                    $("#divChgContainer").show();
                });
                // 2. 如果是联合账户，加载联合账户tab
                chargeHelper.getCTMAccountInfo(currentArchive.ctmArchiveId, function (data) {
                    chargeHelper.setContext("_current_ctmaccount", data);
                    addTab("tab_ctm", "联合账户信息");
                    dust.loadSource(dust.compile($("#__dust__ctmAccountInfo").html(), "ctmAccountInfo__"));
                    dust.render("ctmAccountInfo__", {"data": data}, function (err, res) {
                        $("#tab_ctm").html(res);
                    });
                });

                // 3. 加载业主信息
                chargeHelper.getCustomerInfo(currentArchive.customerId, function () {
                    addTab("tab_customer", "业主信息");
                    dust.loadSource(dust.compile($("#__dust__customerInfo").html(), "customerInfo__"));
                    dust.render("customerInfo__", {"data": currentArchive}, function (err, res) {
                        $("#tab_customer").html(res);
                    });
                });

                // 4. 加载燃气费缴费记录
                chargeHelper.getGasFee(currentArchive.ctmArchiveId, function (data) {
                    dust.loadSource(dust.compile($("#__dust__gasRowInfo").html(), "gasrowInfo__"));
                    dust.render("gasrowInfo__", {"data": data}, function (err, res) {
                        $("#_gasInfo").html(res);
                        chargeHelper.getGasFeeBalance(currentArchive.ctmArchiveId, function (balance) {

                            var $gasBalance = $("#_gasInfo").find("#balance");
                            var $btn = $("#_gasInfo").find("#BtnSub")
                            $gasBalance.text(balance);
                            if (parseFloat(balance) > 0) {
                                $gasBalance.css("color", "green");
                            } else {
                                $gasBalance.css("color", "red");
                            }
                            var dd = currentArchive.ctmArchiveId;
                            //console.log(dd+"1d23");
                            $.ajax({
                                url: "hzqs/hzqrest/gaschgiccard/? fields={\"ctmArchiveId\":1}&query={\"ctmArchiveId\":\"" + currentArchive.iccardState + "\",\"ctmArchiveId\":\"" + currentArchive.ctmArchiveId + "\"}",
                                dataType: "json",
                                contentType: "application/json;charset=utf-8",
                                type: "get",
                                success: function (data) {
                                    if (data.length > 0) {//有卡直接收费
                                        $btn.text("购气");
                                    } else {//无卡先写新卡在收费
                                        $btn.text("开卡购气");
                                    }
                                },
                                error: function () {
                                    //alert("无访问权限");
                                }
                            });
                        });
                    });
                    $("#divChgContainer").show();
                });

                // 6. 加载IC卡信息
                chargeHelper.getIcCardInfo(currentArchive.ctmArchiveId, function (data) {
                    addTab("tab_iccard", "IC卡信息");
                    var cardData = chargeHelper.getContext("_current_iccard");
                    var data = $.extend(cardData, data);
                    // 合并卡数据和库数据
                    console.log(data);
                    dust.loadSource(dust.compile($("#__dust__iccardInfo").html(), "iccardInfo__"));
                    dust.render("iccardInfo__", {"data": data}, function (err, res) {
                        $("#tab_iccard").html(res);
                    });
                    $("#divChgContainer").show();
                });

                //加载补量 情况
                chargeHelper.getComplementInfo()

            }
        });
    }
    function addTab(id, name) {
        var title = $('<li>', {
            'role': 'presentation',
            'id': "li_" + id
        }).append($('<a>', {
            'href': '#' + id,
            'aria-controls': id,
            'role': 'tab',
            'data-toggle': 'tab'
        }).html(name));
        var content = $("#" + id);
        if ($("#divUserInfoContainer").find("ul").find("#li_" + id).length) {
            $("#divUserInfoContainer").find(".tab-content").remove("#" + id);
            $("#divUserInfoContainer").find(".tab-content").append(content);
        } else {
            $("#divUserInfoContainer").find("ul").append(title);
            $("#divUserInfoContainer").find(".tab-content").append(content);
        }
    }

</script>

</html>