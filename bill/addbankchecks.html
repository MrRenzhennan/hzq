<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zh">
<!--<![endif]-->

<!-- BEGIN HEAD -->
<head>
    <title>专用账户对账</title>
    <base href="../../">
    <script src="../pages/scripts/header.js"></script>
    <meta http-equiv="content-type" content="text/html" charset="utf-8"/>
    <link rel='stylesheet' href='../assets/global/plugins/jquery-watable/watable.css'/>
    <link rel='stylesheet' href='../assets/global/plugins/jquery-watable/animate.min.css'/>
    <link rel="stylesheet" type="text/css" href="../assets/global/plugins/bootstrap-select/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>
    <link rel="stylesheet" type="text/css" href="../assets/global/plugins/select2/select2.css">
    <link rel="stylesheet" type="text/css" href="../assets/global/plugins/jstree/dist/themes/default/style.min.css"/>



    <link href="assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet"/>
<link href="assets/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="assets/global/plugins/jstree/dist/themes/default/style.min.css"/>
    <link href="assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME STYLES -->
</head>
<!-- END HEAD -->
<body class="page-header-fixed page-quick-sidebar-over-content">
<!-- 标题栏开始 -->
<div class="page-header navbar navbar-fixed-top">
    <script>$.include("pages/partial/menu.shtml");</script>
</div>
<!-- 标题栏结束 -->
<div class="clearfix"></div>
<div class="page-container">
    <!-- 左侧菜单开始 -->
    <div class="page-sidebar-wrapper">
        <script>$.include("pages/partial/sidebar.shtml");</script>
    </div>
    <!-- 左侧菜单结束 -->
    <!-- 主内容开始 -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <!--内容头开始-->
            <div class="row">
                <div class="col-md-12">
                    <ul class="page-breadcrumb breadcrumb">
                        <li>
                            <i class="fa  fa-map-marker"></i>
                            <a href="javascript:void(0)">基础管理</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="javascript:void(0)">营业基础信息</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="javascript:void(0)">专用账户对账</a>
                        </li>

                    </ul>
                </div>
            </div>
            <div class="container-fluid col-sm-12" style="padding-bottom:0px">
                <form id="oneaddbank" class="form-group">
                    <div class="row">
                       
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group">
                                <div class="input-group-addon">银行专户名称:</div>
                                <input id="find_bankQueName" name="bankQueName" class="inputclear form-control" type="text" placeholder="银行专户名称">
                                <span class="inputclear glyphicon glyphicon-remove-circle hide" ></span>
                            </div>
                        </div>
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group  input-select2me">
                                <div class="input-group-addon">收支类型:</div>
                                <select id="find_areaId" name="ledgerType" class="form-control input-middle select2me"
                                        data-placeholder="收支类型..." >
                                    <option value="">请选择</option>
                                    <option value="0">收入</option>
                                    <option value="1">支出</option>
                                    <option value="2">混合</option>
                                </select>
                                <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                            </div>
                        </div>
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group  input-select2me">
                                <div class="input-group-addon">银行:</div>
                                <select id="find_bankCode" name="bankCode" class="form-control input-middle select2me"
                                        data-placeholder="银行..." >
                                    <option value="">请选择</option>
                                </select>
                                <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                            </div>
                        </div>
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group">
                                <div class="input-group-addon">金额:</div>
                                <input id="find_checkCode" name="amount" class="inputclear form-control" type="number" placeholder="金额">
                                <span class="inputclear glyphicon glyphicon-remove-circle hide" ></span>
                            </div>
                        </div>    
                        
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group">
                                <div class="input-group-addon">入账时间:</div>
                                <div class="input-group date-picker input-daterange" data-date-format="yyyy-mm-dd">
                                    <input id="createtimefrom" type="text" class="form-control" name="ledgerDate">
                                    <span class="inputclear glyphicon glyphicon-remove-circle hidden" ></span>
                                </div>
                            </div>
                        </div>  
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group  input-select2me">
                                <div class="input-group-addon">资金类型:</div>
                                <select id="find_amountType" name="amountType" class="form-control input-middle select2me"
                                        data-placeholder="资金类型..." >
                                    <option value="">请选择</option>
                                    <option value="1">燃气费</option>
                                    <option value="2">垃圾费</option>
                                    <option value="3">燃气费+垃圾费</option>
                                </select>
                                <span class="inputclear glyphicon glyphicon-remove-circle hide"></span>
                            </div>
                        </div>              
                        <div class="col-sm-3 form-group">
                            <div class="btn-group input-group">
                                <div class="input-group-addon">批次号:</div>
                                <input id="find_batchNum" name="batchNum" class="inputclear form-control" type="text" placeholder="批次号">
                                <span class="inputclear glyphicon glyphicon-remove-circle hide" ></span>
                            </div>
                        </div>                
                        <div class="btn-set col-sm-12" style="text-align:center;margin:20px 0px;">
                            <button id="cancel"  type="button" class="btn default">
                                取消
                            </button>
                            <button id="save_btn" type="button" class="btn blue">保存</button>
                        </div>               
                    </div>
                </form> 
            </div>
        </div>
    </div>
</div>
    <!-- 主内容结束 -->
</div>

<script type="text/javascript">$.include("pages/partial/xwatable-form.shtml")</script>
</body>
<script>$.include("pages/partial/scripts.shtml");</script>
<script type="text/javascript" src="assets/global/plugins/jquery-watable/jquery.watable.js"></script>
<script type="text/javascript" src="pages/scripts/rqlbuilder.js"></script>
<script type="text/javascript" src="pages/scripts/xwatable.js"></script>
<script type="text/javascript" src="pages/scripts/refhelper.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-select/bootstrap-select.min.js"></script>
<script type="text/javascript" src="assets/global/plugins/select2/select2.min.js"></script>
<script type="text/javascript" src="assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js"></script>
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script type="text/javascript" src="assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="assets/admin/pages/scripts/components-pickers.js"></script>

<script type="text/javascript" src="assets/global/plugins/bootstrap-daterangepicker/moment.min.js"></script>

<script src="pages/scripts/jquery.json.min.js"></script>
<script type="text/javascript" src="pages/scripts/jquery.serialize-object.min.js"></script>


<script src="mods/basismanage.js"></script>
<script src="mods/sys.js"></script>
<script src="mods/bas.js"></script>
<!-- <script src="bill/js/bankchecks.js"></script> -->
<script src="pages/scripts/userinfo.js"></script>

<!-- END PAGE LEVEL SCRIPTS -->
<script type="text/javascript">
    
    ComponentsPickers.init();
    var areaId = JSON.parse(localStorage.getItem("user_info")).area_id;
    var userId = JSON.parse(localStorage.getItem("user_info")).userId;


    $("#cancel").on("click",function(){
        history.go("-1")
    })

    var bankHelper=RefHelper.create({
        ref_url:"gasbasbank",
        ref_col:"bankCode",
        ref_display:"bankName"
    });



    $.map(bankHelper.getData(),function(ind,val){
        console.log("000000")
        $("#find_bankCode").append("<option value='"+val+"'>"+ind+"</option>")
    })
    

    $("#save_btn").on("click",function(){
        var json = $('#oneaddbank').serializeObject();
        var status= false;
        $.each(json,function(key,val){
            if(!val){
                status = true;
                return ;
            }else{
                status = false;
            }
        })
        if(status){
            bootbox.alert("<center><h4>输入项不能为空。</h4></center>")
            return false;
        }

        var result = Restful.findNQ(hzq_rest+'gasbllbankcheckmgr/?query={"checkName":"'+$("#find_bankQueName").val()+'"}')
        if(result && result.length == "1"){
            json['bankCheckMgrId'] = result[0].bankCheckMgrId
            json['status'] = "1"
        }else{
            json['status'] = "0"
        }
        json['createdBy'] = userId;
        json['modifiedBy'] = userId;
        json['createdTime'] = new Date(new Date()+"-00:00");
        json['modifiedTime'] = new Date(new Date()+"-00:00");

        console.log(json)
        var results = Restful.insert(hzq_rest+'gasbllbankcheck',json)
        if(results.success){
            bootbox.alert("<center><h4>添加成功。</h4></center>",function(){
                history.go("-1")
            })

        }   

    })
</script><!-- End of User Script-->
</html>